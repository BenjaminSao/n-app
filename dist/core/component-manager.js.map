{"version":3,"file":"component-manager.js","sourceRoot":"","sources":["../../src/core/component-manager.ts"],"names":[],"mappings":";;AAAA,6CAAoC;AAEpC,qEAAiE;AACjE,6CAAmD;AACnD,2DAAuD;AAGvD;IAOI,YAAmB,GAAQ,EAAE,SAAoB;QAHhC,mBAAc,GAAG,IAAI,KAAK,EAAyB,CAAC;QAKjE,mBAAK,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC,cAAc,EAAE,CAAC;QACnC,mBAAK,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC,cAAc,EAAE,CAAC;QAC/C,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;QAChB,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;IAChC,CAAC;IAGM,kBAAkB,CAAC,GAAG,yBAAqC;QAE9D,GAAG,CAAC,CAAC,IAAI,IAAI,IAAI,yBAAyB,CAAC;YACvC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;IACrC,CAAC;IAEM,SAAS;QAEZ,IAAI,gBAAgB,GAAG,IAAI,oCAAgB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAE7D,GAAG,CAAC,CAAC,IAAI,YAAY,IAAI,IAAI,CAAC,cAAc,CAAC;YACzC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,OAAO,EAAE,gBAAgB,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;IACzF,CAAC;IAGO,iBAAiB,CAAC,uBAAiC;QAEvD,IAAI,YAAY,GAAG,IAAI,8CAAqB,CAAC,uBAAuB,CAAC,CAAC;QAEtE,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,YAAY,CAAC,IAAI,CAAC,CAAC;YAC5D,MAAM,IAAI,kCAAoB,CAAC,+CAA+C,YAAY,CAAC,IAAI,IAAI,CAAC,CAAC;QAEzG,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,KAAK,YAAY,CAAC,OAAO,CAAC,CAAC;YAClE,MAAM,IAAI,kCAAoB,CAAC,kDAAkD,YAAY,CAAC,OAAO,GAAG,CAAC,CAAC;QAE9G,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACvC,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,YAAY,CAAC,IAAI,EAAE,YAAY,CAAC,SAAS,CAAC,CAAC;IACjF,CAAC;CACJ;AA5CD,4CA4CC","sourcesContent":["import { given } from \"n-defensive\";\nimport { Container } from \"n-ject\";\nimport { ComponentRegistration } from \"./component-registration\";\nimport { ApplicationException } from \"n-exception\";\nimport { ComponentFactory } from \"./component-factory\";\n\n\nexport class ComponentManager\n{\n    private readonly _vue: any;\n    private readonly _container: Container;\n    private readonly _registrations = new Array<ComponentRegistration>();\n    \n    \n    public constructor(vue: any, container: Container)\n    {\n        given(vue, \"vue\").ensureHasValue();\n        given(container, \"container\").ensureHasValue();\n        this._vue = vue;\n        this._container = container;\n    }\n    \n    \n    public registerComponents(...componentViewModelClasses: Function[]): void\n    {\n        for (let item of componentViewModelClasses)\n            this.registerComponent(item);    \n    }\n    \n    public bootstrap(): void\n    {\n        let componentFactory = new ComponentFactory(this._container);\n        \n        for (let registration of this._registrations)\n            this._vue.component(registration.element, componentFactory.create(registration));\n    }\n    \n    \n    private registerComponent(componentViewModelClass: Function): void\n    {\n        let registration = new ComponentRegistration(componentViewModelClass);\n        \n        if (this._registrations.some(t => t.name === registration.name))\n            throw new ApplicationException(`Duplicate Component registration with name '${registration.name}'.`);\n        \n        if (this._registrations.some(t => t.element === registration.element))\n            throw new ApplicationException(`Duplicate Component registration with element '${registration.element}'`);\n        \n        this._registrations.push(registration);\n        this._container.registerTransient(registration.name, registration.viewModel);\n    }\n}"]}